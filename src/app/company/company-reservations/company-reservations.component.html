<span *ngIf="event && availability && availability.venue" class="content">

  <div class="venue">

    <div class="selection" *ngIf="selectedDay">

      <div class="title">
        <span [ngClass]="{'canChangeDay': selectedDay.day > 1}" (click)="changeDay(selectedDay.day - 1)">
          <b>&lt;</b>
        </span>
        <span>
          <b>Day {{selectedDay.day}}</b>
        </span>
        <span>{{selectedDay.date | date : 'MMMM d'}}</span>
        <span [ngClass]="{'canChangeDay': selectedDay.day < event.getDuration()}" (click)="changeDay(selectedDay.day + 1)">
          <b>&gt;</b>
        </span>
      </div>

      <div class="options">
        <div class="day" *ngFor="let day of selectedDay.allDays" [ngClass]="{'selected': day === selectedDay.day}" (click)="changeDay(day)">
          Day {{day}}
        </div>
      </div>

    </div>

    <div class="canvas-wrapper">

      <div class="canvas">
        <app-venue-image [maxHeight]="55" [state]="canvasState"></app-venue-image>
      </div>

      <div class="stands">

        <h6>Please choose a stand for this day</h6>

        <div class="stands-list">
          <div class="stand" *ngFor="let stand of availability.venue.stands | sortStands" (mouseover)="selectStand(stand)" (mouseleave)="deselectStand(stand.id)"
            (click)="clickStand(stand.id)" [ngClass]="{'free': isFreeStand(stand.id), 'occupied': isOccupiedStand(stand.id), 'clickable': clickableStand(stand.id), 'pending': isPendingBook(stand.id), 'confirmed': isConfirmedBook(stand.id)}">
            {{stand.id + 1}}
          </div>
        </div>

      </div>

    </div>

  </div>

  <div class="reservations">

    <div class="title">
      <span>
        <b>{{credentials.companyName}}</b>
      </span>
      <span>Reservations</span>
    </div>

    <div *ngIf="latestReservation.issued === undefined && latestReservation.stands.length < credentials.participationDays" class="missing">
      <h6>
        You can still book {{credentials.participationDays - latestReservation.stands.length}} {{credentials.participationDays -
        latestReservation.stands.length > 1 ? 'days' : 'day'}}
      </h6>
    </div>

    <div *ngIf="latestReservation" class="reservation">
      <app-reservation-card [reservation]="latestReservation" [event]="event"></app-reservation-card>
    </div>

    <div class="info">
      <div *ngIf="latestReservation && latestReservation.isPending() && latestReservation.issued !== undefined" class="action cancel">
        <button class="btn btn-danger" (click)="cancelReservation()">Cancel reservation</button>
      </div>

      <div *ngIf="latestReservation && latestReservation.issued === undefined && latestReservation.stands.length === credentials.participationDays"
        class="action submit">
        <button class="btn btn-primary" (click)="makeReservation()">Submit reservation</button>
      </div>
    </div>

  </div>

  <!--
<div *ngFor="let reservation of reservations" class="reservation">
      <app-reservation-card [reservation]="reservation" [event]="event"></app-reservation-card>
    </div>
  -->

</span>

<!--
<span *ngIf="event && availability.venue">
  <div class="canvas-stands">

    <div class="canvas-wrapper">
      <div class="canvas">

        <div class="day-selection">
          <b>Day: </b>
          <ngb-pagination [collectionSize]="event.duration.getDate()" [pageSize]="1" [(page)]="day" (pageChange)="changeDay($event)"
            aria-label="Default pagination" size="sm"></ngb-pagination>
        </div>


        <app-venue-image [maxWidth]="30" [state]="canvasState"></app-venue-image>

      </div>
    </div>


    <div class="stands-wrapper">

      <div class="stands">

        <div class="title">
          <h3>Stands</h3>
        </div>

        <div class="stands-list">
          <div class="stand" *ngFor="let stand of availability.venue.stands | sortStands" (mouseover)="selectStand(stand)" (mouseleave)="deselectStand(stand.id)">
            <div class="stand border" (click)="clickStand(day, stand.id)" [ngClass]="{'free': isFreeStand(day, stand.id), 'occupied': isOccupiedStand(day, stand.id), 'clickable': clickableStand(day, stand.id), 'pending': isPendingBook(day, stand.id), 'confirmed': isConfirmedBook(day, stand.id)}">
              {{stand.id + 1}}
            </div>
          </div>
        </div>

      </div>

      <div class="reservations-content-wrapper" *ngIf="reservations">
        <div class="title">
          <h3>My reservations</h3>
        </div>

        <div class="reservations">

          <div class="reservation" *ngIf="pendingReservation && pendingReservation.stands.length" [ngClass]="{'confirmed': pendingReservation.isConfirmed(), 'cancelled': pendingReservation.isCancelled(), 'pending': pendingReservation.isPending()}">
            <span class="stands-counter">
              <b>Stands: </b>{{pendingReservation.stands.length}}/{{credentials.participationDays}}
            </span>
            <div class="reservation-content">

              <div class="status">
                <span class="submit" *ngIf="pendingReservation.id === undefined">
                  <button class="btn btn-primary" (click)="makeReservation()" *ngIf="pendingReservation.feedback === undefined" [disabled]="pendingReservation.stands.length !== credentials.participationDays">Submit</button>
                </span>
                <span *ngIf="pendingReservation.isPending() && pendingReservation.id !== undefined">
                  <h5>Pending</h5>
                </span>
                <span *ngIf="pendingReservation.isConfirmed()">
                  <h5>Confirmed</h5>
                </span>
                <span *ngIf="pendingReservation.isCancelled()">
                  <h5>Cancelled</h5>
                </span>
              </div>

              <div class="reservation-stands-wrapper" *ngIf="pendingReservation">
                <span class="reservation-stands-list">

                  <div class="reservation-stands border" *ngFor="let stand of pendingReservation.stands">
                    <div class="reservation-day">
                      <b>Day: </b>
                      {{stand.day}}
                    </div>
                    <div class="reservation-stand">
                      <b>Stand: </b>
                      {{stand.standId + 1}}
                    </div>
                  </div>

                </span>
              </div>

              <div class="issued" *ngIf="pendingReservation.issued" [ngClass]="{'bottom-right': pendingReservation.issued === undefined}">
                <b>Issued: </b>{{pendingReservation.issued | date:'dd/MM/yyyy HH\'h\'mm'}}
              </div>

              <div class="actions">
                <button class="btn btn-danger" (click)="cancelReservation()" *ngIf="pendingReservation.feedback">Cancel</button>

              </div>
            </div>


          </div>

          <ng-container *ngIf="reservations">
            <div *ngFor="let reservation of reservations">
              <app-reservation [reservation]="reservation"></app-reservation>
            </div>
          </ng-container>
        </div>

      </div>

    </div>

  </div>

</span>
-->